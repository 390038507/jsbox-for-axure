{"version":3,"file":"axlib-jsbox-v2.min.js","sources":["../lib/main.js"],"sourcesContent":["/**\n * \n * AxLib - JsBox\n * \n * Author: WaveF\n * QQ: 298010937\n * \n * v2.4.10\n * - 基于vite构建\n * \n **/\n(function(){\n\n  const axlibPath = getDeploy({ gval: 'AxLib', defaultUrl: 'https://ax.minicg.com/axlib-v3.min.js' });\n\n  main();\n\n  function main() {\n    if (window.AxJsBox) {\n      console.error('请先加载 axlib!');\n      return;\n    }\n\n    window.AxJsBox = {\n      name: 'jsbox',\n      version: '2.4.10',\n      author: 'wavef',\n      contact: 'wavef@live.com',\n      instances: [],\n      log: function(textInfo, expand=true) {\n        const style = 'color:#06f;';\n        console[expand?'group':'groupCollapsed']('%cJSBOX', style);\n        console.log(textInfo);\n        console.groupEnd();\n      }\n    };\n\n    // 添加一个快速获取和设置id的方法\n    $.fn.id = function () {\n      if (arguments.length == 0) {\n        return this.attr('id');\n      } else if (arguments.length == 1) {\n        this.attr('id', arguments[0]);\n      }\n    };\n\n    // 如果要本地集成axlib，就把axlib.min.js的代码贴到开头，这时yepnope默认存在\n    if (!window.yepnope) {\n      getAxLib(axlibPath, inited);\n    } else {\n      inited();\n    }\n  }\n\n  function inited() {\n    /*// 在清空中继器数据的情况下仍然可用（由于兼容问题暂时封印）\n    let repTempScriptTags = $('script[type=axure-repeater-template]');\n    $.each(repTempScriptTags, (idx,item) => {\n      let repTempScriptContent = $(item).text();\n      let userScript;\n      if (repTempScriptContent.includes('ax-jsbox')) {\n        userScript = repTempScriptContent.split('\\<textarea')[1];\n        userScript = userScript.split('\\>').slice(1).join('\\>');\n        userScript = userScript.split('\\<\\/textarea\\>')[0];\n        userScript = unescapeHTML(userScript);\n        console.log(userScript);\n      }\n    });*/\n\n    let $jsboxes = $('div[class*=\"ax-jsbox\"]');\n    let repeaterIds = [];\n    $.each($jsboxes, (idx, item) => { repeaterIds.push($(item).parent().parent().id()); });\n    repeaterIds = [...new Set(repeaterIds)];\n\n    $.each(repeaterIds, (idx, item) => {\n      let $rep = $('#'+item);\n      let repId = $rep.id();\n      let rep = $axure(`#${repId}`);\n      let $wrapper = $rep.parent();\n      let $jsbox = $rep.children('div').eq(0).children('div[class*=ax-jsbox]');\n      let jsboxId = $jsbox.id();\n      let $textArea = $jsbox.find('textarea');\n      let $textAreas = $rep.find('textarea');\n      let textAreaId = $textArea.id();\n      let $shape = $jsbox.children(`#${jsboxId}_div`);\n      let shapeId = $shape.id();\n      let js = formatCode($textArea.val());\n      let jsLines = js.split('\\n');\n\n      let $view = cloneNode($rep);\n      let viewId = $view.id();\n      $view.insertAfter($rep);\n\n      let panelRawData = rep.getRepeaterDataOnce({format:'default'});\n      let extraRawData = rep.getRepeaterDataDiff({format:'default'});\n      // extraRawData.splice(0, panelRawData.length);\n\n      let filesInExtra = getFileListFromExtraData(extraRawData) || [], filesInTextarea = getFileListFromTextArea(jsLines) || [];\n      let files = filesInExtra.concat(filesInTextarea);\n      files = [...new Set(files)];\n\n      $rep.hide();\n      addLoadingSvg($view);\n\n      let formatInlineFunction = function (func) {\n        return func.toString().replace(/VIEW_ID/g, viewId).replace(/REP_ID/g, repId).replace(/JSBOX_ID/g, jsboxId).replace(/TEXTAREA_ID/g, textAreaId).replace(/  /g, '').trim();\n      };\n\n      let clearAllTextareas = function () {\n        $('#REP_ID').children('div').find('div[class*=\"ax-jsbox\"]').children('textarea').html('');\n      };\n\n      let getAllTextareas = function () {\n        return $('#REP_ID').children('div').find('div[class*=\"ax-jsbox\"]').children('textarea');\n      };\n\n      let getTextarea = function () {\n        return $axure('#TEXTAREA_ID');\n      };\n\n      let getRepeater = function () {\n        return $axure('#REP_ID');\n      };\n\n      let getView = function () {\n        return $axure('#VIEW_ID');\n      };\n\n      let runScript = function (jsUrl) {\n        $.get(jsUrl, script => eval(script));\n      };\n\n      let setText = function (text) {\n        $('#TEXTAREA_ID').val(text);\n      };\n\n      let getText = function () {\n        return $('#TEXTAREA_ID').val();\n      };\n\n      let setValues = function (arr, marker='/') {\n        $('#TEXTAREA_ID').val(marker + arr.join(marker));\n        return `[[ This.text.slice(This.text.split(\"${marker}\", 序号).length+1).split(\"${marker}\", 1) ]]`;\n      };\n\n      let emit = function (action, target) {\n        target = target || $axure('#JSBOX_ID');\n        if (action.toLowerCase() === 'moved') {\n          target.moveBy(0,0,{});\n        }\n        else if (action==='selected') {\n          target.selected(true);\n        }\n        else if (action==='unselected') {\n          target.selected(false);\n        }\n        else if (action==='toggleSelect') {\n          target.selected(!target.selected());\n        }\n      };\n\n      let showView = function (alpha, pointerEvents) {\n        alpha = alpha || 1;\n        pointerEvents = pointerEvents || true;\n        $('#VIEW_ID').show().css({\n          'opacity': alpha,\n          'pointer-events': pointerEvents ? 'auto' : 'none'\n        });\n      };\n\n      let hideView = function () {\n        $('#VIEW_ID').hide();\n      };\n\n      let setViewStyle = function(css) {\n        css = css == 'none' ? { 'border': 'none', 'background-color': 'transparent' } : css;\n        $('#VIEW_ID').css(css);\n      };\n\n      let showLoading = function () {\n        setTimeout(()=>{ $('#VIEW_ID').children('.ax-loading').show(); }, 0);\n      };\n\n      let hideLoading = function () {\n        setTimeout(()=>{ $('#VIEW_ID').children('.ax-loading').fadeOut(); }, 0);\n      };\n\n      let appendHTML = function (str, target) {\n        target = target || $('#VIEW_ID');\n        target.append(str);\n      };\n\n      let setHTML = function (str, target) {\n        target = target || $('#VIEW_ID');\n        target.html(str);\n      };\n\n      let appendCSS = function (str) {\n        $('head').append('<style>' + str + '</style>');\n      };\n\n      let getUserElements = function () {\n        let _els = [];\n        let wrapper = $('#REP_ID').children('div').eq(0);\n        \n        $.each(wrapper.children(), (idx,item) => {\n          if (!item.className.includes('ax-jsbox')) {\n            _els.push(item);\n          }\n        });\n        return _els;\n      };\n\n      let showUserElements = function () {\n        THIS.$view.append(THIS.getUserElements());\n      };\n\n      let getDataOnce = function (format) {\n        return $axure('#REP_ID').getRepeaterDataOnce(format);\n      };\n\n      let getExtraData = function (format) {\n        return $axure('#REP_ID').getRepeaterDataDiff(format);\n      };\n\n      let getLatestData = function (format) {\n        return $axure('#REP_ID').getRepeaterData(format);\n      };\n\n      let deleteData = function (linesCount) {\n        $axure('#REP_ID').deleteRepeaterData(linesCount);\n        $axure('#REP_ID').refreshRepeater();\n      };\n\n      let clearExtraData = function() {\n        let _exData = $axure('#REP_ID').getRepeaterDataDiff();\n        $axure('#REP_ID').deleteRepeaterData(_exData.length);\n        $axure('#REP_ID').refreshRepeater();\n      };\n\n      let clearData = function () {\n        $axure('#REP_ID').clearRepeaterData();\n        $axure('#REP_ID').refreshRepeater();\n      };\n      \n      let getNode = function (el) {\n        let _id, _node;\n        if (el.$ !== undefined) {\n          _id = el.$().attr('id');\n          _node = $(`#${_id}`).get(0);\n        } else if (el.jquery !== undefined) {\n          _id = el.attr('id');\n          _node = $(`#${_id}`).get(0);\n        } else if (el.tagName !== undefined) {\n          _id = el.id;\n          _node = $(`#${_id}`).get(0);\n        }\n        return _node;\n      };\n\n      let loadJS = function (url,cb) {\n        let script = document.createElement('script');\n        script.onload = cb;\n        script.src = url;\n        $('head').appendChild(script);\n      };\n\n      let loadCSS = function (url) {\n        $('head').append('<link text=\"text/css\" href=\"' + url + '\" rel=\"Stylesheet\" />');\n      };\n      \n      let injectCode = `;const Loader = window.yepnope;let THIS = {\n        files: ${`[\"${files.join('\\\",\\\"')}\"]`},\n        vid: '${viewId}',\n        view: $axure('#${viewId}'),\n        $view: $axure('#${viewId}').$(),\n        rid: '${repId}',\n        repeater: $axure('#${repId}'),\n        $repeater: $('#${repId}'),\n        textarea: $axure('#${textAreaId}'),\n        $textarea: $('#${textAreaId}'),\n        $textareas: $('#${repId}').find('textarea'),\n        jsbox: $axure('#${jsboxId}'),\n        $jsbox: $axure('#${jsboxId}').$(),\n        shape: $axure('#${shapeId}'),\n        $shape: $axure('#${shapeId}').$(),\n        size: { width:${ $jsbox.width() }, height:${ $jsbox.height() } },\n        position: { x:${ $jsbox.position().left }, y:${ $jsbox.position().top } },\n        clearAllTextareas: ${formatInlineFunction(clearAllTextareas)},\n        getAllTextareas: ${formatInlineFunction(getAllTextareas)},\n        getTextarea: ${formatInlineFunction(getTextarea)},\n        getRepeater: ${formatInlineFunction(getRepeater)},\n        getView: ${formatInlineFunction(getView)},\n        setText: ${formatInlineFunction(setText)},\n        getText: ${formatInlineFunction(getText)},\n        setValues: ${formatInlineFunction(setValues)},\n        emit: ${formatInlineFunction(emit)},\n        getUserElements: ${formatInlineFunction(getUserElements)},\n        showUserElements: ${formatInlineFunction(showUserElements)},\n        getData: ${formatInlineFunction(getDataOnce)},\n        getDataOnce: ${formatInlineFunction(getDataOnce)},\n        getExtraData: ${formatInlineFunction(getExtraData)},\n        getLatestData: ${formatInlineFunction(getLatestData)},\n        deleteData: ${formatInlineFunction(deleteData)},\n        clearExtraData: ${formatInlineFunction(clearExtraData)},\n        clearData: ${formatInlineFunction(clearData)},\n        appendHTML: ${formatInlineFunction(appendHTML)},\n        setHTML: ${formatInlineFunction(setHTML)},\n        appendCSS: ${formatInlineFunction(appendCSS)},\n        showView: ${formatInlineFunction(showView)},\n        hideView: ${formatInlineFunction(hideView)},\n        setViewStyle: ${formatInlineFunction(setViewStyle)},\n        showLoading: ${formatInlineFunction(showLoading)},\n        hideLoading: ${formatInlineFunction(hideLoading)},\n        runScript: ${formatInlineFunction(runScript)},\n        getNode: ${formatInlineFunction(getNode)},\n        loadJS: ${formatInlineFunction(loadJS)},\n        loadCSS: ${formatInlineFunction(loadCSS)}\n      };\n      if(AxJsBox.instances){AxJsBox.instances.push(THIS);}\n      else if(AxJsBox.elements){AxJsBox.elements.push(THIS);}\n      `;\n      injectCode = injectCode.replace(/  /g, '').replace(/\\n/g, '');\n      injectCode = '\\/* inject begin *\\/\\n' + injectCode + '\\n\\/* inject end *\\/\\n\\n';\n      js = injectCode + js;\n      js = `(function(){\\n${js}\\n}());`;\n      \n      let jsType = getScriptTypeFromTextArea(jsLines);\n      let jsOrder = getScriptOrderFromTextArea(jsLines);\n      if (files.length === 0) {\n        finalAppend($view, js, jsType, jsOrder);\n      } else {\n        yepnope({\n          load: files,\n          complete: ()=>{\n            finalAppend($view, js, jsType, jsOrder);\n          }\n        });\n      }\n    });\n  }\n\n  function finalAppend(container, js, type, order) {\n    container.append(`<script class=\"jsbox-script\" type=\"${type}\" ${order}>${js}</script>`);\n    container.find('.ax-loading').hide();\n  }\n\n  function getAxLib(path, callback=function(){}) {\n    $.getScript(path, callback);\n  }\n\n  function getHostPath() {\n      let path = window.location.href;\n      let arr = path.split('/');\n      arr.pop();\n      path = arr.join('/');\n      return path;\n  }\n\n  function getDeploy(params) {\n      let { gval, defaultUrl } = params;\n      let deploy = '';\n      $axure.internal($ax=>{deploy=$ax.globalVariableProvider.getVariableValue(gval)});\n      if (deploy === '') { deploy = defaultUrl; }\n      if (deploy.indexOf('{host}')>-1) { deploy = deploy.replace('{host}', getHostPath()); }\n      return deploy;\n  }\n\n  function formatCode(code) {\n    // return code.replace(/ /gi, '').replace(/  +/g, ' ').replace(/\\s\\s+/g, ' ');\n\n    let pattern = '// @import ';\n    let lines = code.split('\\n');\n    lines = lines.map(line => {\n      if (line.startsWith('//import')) { return line.replace('//import', pattern); }\n      else if (line.startsWith('// import')) { return line.replace('// import', pattern); }\n      else if (line.startsWith('//@import')) { return line.replace('//@import', pattern); }\n      else if (line.startsWith('@import')) { return line.replace('@import', pattern); }\n      else { return line; }\n    });\n\n    let result = lines.join('\\n');\n    result = result.replace(/ /gi, '').replace(/  +/g, ' ').replace(/\\n +/g, '\\n').replace(/\\n\\n+/g, '\\n');\n\n    return result;\n  }\n\n  function addLoadingSvg(target, options) {\n    options = options || { color:'#D1D5DB', opacity:0.2, scale:1.2, delay:0, dur:1, blending:'difference' };\n\n    let svg = `\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"38\" height=\"38\" viewBox=\"0 0 38 38\" stroke=\"${options.color}\" style=\"transform:scale(${options.scale});\">\n        <g fill=\"none\" fill-rule=\"evenodd\">\n          <g transform=\"translate(1 1)\" stroke-width=\"2\">\n            <circle stroke-opacity=\"${options.opacity}\" cx=\"18\" cy=\"18\" r=\"18\"/>\n            <path d=\"M36 18c0-9.94-8.06-18-18-18\">\n              <animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 18 18\" to=\"360 18 18\" dur=\"${options.dur}s\" repeatCount=\"indefinite\"/>\n            </path>\n          </g>\n        </g>\n      </svg>\n    `;\n\n    $('head').append(`\n      <style>\n        html, body { height: 100%; }\n        .ax-loading { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: transparent; z-index: 9999; mix-blend-mode:${options.blending}; pointer-events:none; transform: scale(.5); }\n        .ax-loading-svg { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }\n      </style>\n    `);\n    $(target).append(`<div class=\"ax-loading\"><div class=\"ax-loading-svg\">${svg}</div></div>`);\n\n    return svg;\n  }\n\n  function getFileListFromExtraData(data) {\n    let temp = $axure.formatRepeaterData(data, { format: 'row' });\n    temp = Object.keys(temp);\n    // 如果每一项都以 http 开头，那就是文件列表\n    return temp.filter(value => value.substr(0, 4) == 'http');\n  }\n\n  function getFileListFromTextArea(lines) {\n    let jsFiles = [];\n    \n    lines.forEach(line => {\n      let pattern = '// @import ';\n      if (line.startsWith(pattern)) {\n        if (line.includes('=')) {\n          jsFiles.push( line.replace(pattern, '').replace('=', '').replace(/\\s/g, '').replace(/\\'/g, '').replace(/\\\"/g, '') );\n        } else {\n          jsFiles.push( line.replace(pattern, '').replace(/\\s/g, '') );\n        }\n      }\n    });\n    return jsFiles;\n  }\n\n  function getScriptTypeFromTextArea(lines) {\n    let type = 'text/javascript';\n    lines.forEach(line => {\n      if (line === '//type module') {\n        type = 'module';\n      } else if (line.startsWith('//type')) {\n        line = line.replace(/\\s/g, '');\n        if (line === '//type=\"module\"' || line === '//type=\\'module\\'' || line === '//type=module') {\n          type = 'module';\n        }\n      }\n    });\n    return type;\n  }\n\n  function getScriptOrderFromTextArea(lines) {\n    let order = '';\n    lines.forEach(line => {\n      if (line === '//defer') {\n        order = 'defer';\n      } else if (line === '//async') {\n        order = 'async';\n      }\n    });\n    return order;\n  }\n\n  function cloneNode($node) {\n    let $clone = $node.clone();\n    $clone.children().remove();\n    $clone.data('label', '');\n    $clone.removeClass('ax_default');\n    $clone.addClass($clone.id() + '_clone');\n    $clone.id($clone.id() + '_jsbox_view');\n    $clone.css({\n      'display': 'flex',\n      'position': $node.css('position'),\n      'left': $node.css('left'),\n      'top': $node.css('top'),\n      'width': $node.css('width'),\n      'height': $node.css('height'),\n      'text-align': 'left',\n      'border-radius': $node.css('border-radius')\n    });\n    return $clone;\n  }\n\n  function escapeHTML(a){\n    a = \"\" + a;\n    return a.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&apos;\");;\n  }\n\n  function unescapeHTML(a){\n    a = \"\" + a;\n    return a.replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\").replace(/&amp;/g, \"&\").replace(/&quot;/g, '\"').replace(/&apos;/g, \"'\");\n  }\n\n}());"],"names":["textInfo","expand","style","idx","item","func","text","arr","marker","action","target","alpha","pointerEvents","css","str","_els","wrapper","format","linesCount","_exData","el","_id","_node","url","cb","script","container","js","type","order","path","callback","params","gval","defaultUrl","deploy","$ax","code","pattern","lines","line","result","options","svg","data","temp","value","jsFiles","$node","$clone"],"mappings":"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"}